{
    "version": "https://jsonfeed.org/version/1",
    "title": "SnowRoll Blog • All posts by \"shell\" tag",
    "description": "分享经验，记录生活",
    "home_page_url": "https://snowroll.github.io",
    "items": [
        {
            "id": "https://snowroll.github.io/linux-commands/",
            "url": "https://snowroll.github.io/linux-commands/",
            "title": "linux常用命令汇总",
            "date_published": "2022-07-28T02:35:04.000Z",
            "content_html": "<ol>\n<li><strong>强制命令模式执行： <code>:w !sudo tee %</code> </strong></li>\n</ol>\n  <figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">w： 表示保存文件</span><br><span class=\"line\">！： 表示执行外部命令</span><br><span class=\"line\">tee： linux命令，这个有点复杂，可以查看linux命令帮助</span><br><span class=\"line\">%： 在执行外部命令时，%会扩展成当前文件名；这个%区别于替换时的%，替换时%的意义是代表整个文件，而不是文件名</span><br><span class=\"line\"></span><br><span class=\"line\"># 只读文件，不修改强制退出</span><br><span class=\"line\">q!</span><br></pre></td></tr></table></figure>\n<p>上述方式非常完美的解决了不能保存只读文件的问题，但毕竟命令还是有些长，为了避免每次输入一长串的命令，可以将它映射为一个简单的命令加到 .vimrc 中：</p>\n  <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&quot; Allow saving of files as sudo when I forgot to start vim using sudo.</span><br><span class=\"line\"> cmap w!! w !sudo tee &gt; /dev/null %</span><br></pre></td></tr></table></figure>\n<p>这样，简单的运行:w!! 即可。命令后半部分 &gt; /dev/null 作用为显式的丢掉标准输出的内容。</p>\n<ol start=\"2\">\n<li><strong>删除大量文件</strong></li>\n</ol>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9kZXZlbG9wZXIvYXJ0aWNsZS8xNjQ3Mjkw\">Linux 下删除大量文件效率对比，看谁删的快！</span></p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 首先建立空文件夹blanktest</span></span><br><span class=\"line\">$ time rsync -a --delete blanktest/ <span class=\"built_in\">test</span>/</span><br><span class=\"line\">rsync -a --delete blanktest/ <span class=\"built_in\">test</span>/  0.59s user 7.86s system 51% cpu 16.418 total</span><br><span class=\"line\">16s，很好很强大。</span><br></pre></td></tr></table></figure>\n<ol>\n<li>查看磁盘可用空间</li>\n</ol>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">df -h  <span class=\"comment\"># 查看磁盘可用空间</span></span><br><span class=\"line\">du -h --max-depth=1  ./  <span class=\"comment\"># 查看当前目录及其目录的文件大小</span></span><br><span class=\"line\">du -sh ./  <span class=\"comment\"># 查看当前目录总大小</span></span><br></pre></td></tr></table></figure>\n<ol>\n<li>apt-get 下载失败 <strong><span class=\"exturl\" data-url=\"aHR0cHM6Ly9hc2t1YnVudHUuY29tL3F1ZXN0aW9ucy8zNjMyMDAvZS11bmFibGUtdG8tY29ycmVjdC1wcm9ibGVtcy15b3UtaGF2ZS1oZWxkLWJyb2tlbi1wYWNrYWdlcw==\">E: Unable to correct problems, you have held broken packages</span></strong></li>\n</ol>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 改用aptitude，更加方便智能</span></span><br><span class=\"line\">sudo apt-get install aptitude</span><br><span class=\"line\">aptitude get install yourpkg</span><br></pre></td></tr></table></figure>\n<ol>\n<li>\n<p>查看进程</p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 特定用户的特定进程</span></span><br><span class=\"line\">ps -u root -ef | grep consume </span><br><span class=\"line\"><span class=\"comment\"># kill特定用户的所有进程</span></span><br><span class=\"line\"><span class=\"comment\"># 1. 打印出所有pid，再kill</span></span><br><span class=\"line\">ps -ef | grep ttlsa | awk <span class=\"string\">&#x27;&#123; print $2 &#125;&#x27;</span> | sudo xargs <span class=\"built_in\">kill</span> -9</span><br><span class=\"line\"><span class=\"comment\"># 2. -v --invert-match 显示不包含匹配文本的所有行</span></span><br><span class=\"line\">ps -ef | grep dynamic.sh | grep -v grep | awk <span class=\"string\">&#x27;&#123;print $2&#125;&#x27;</span> | xargs <span class=\"built_in\">kill</span> -9</span><br><span class=\"line\"><span class=\"comment\"># 3. pgrep -u参数查出用户的所有pid，然后依次kill</span></span><br><span class=\"line\">pgrep -u ttlsa | sudo xargs <span class=\"built_in\">kill</span> -9</span><br><span class=\"line\"><span class=\"comment\"># 查看进程 -e 显示系统内所有进程信息 -l long 长格式显示 -f full 完整显示</span></span><br><span class=\"line\">ps -elf</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>ps -aux 解释</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#   user     pid  cpu mem  vsz   rss  tty  stat start time command</span></span><br><span class=\"line\">&gt;&gt; chaihua+ 26879 0.0 0.0 112820 968 pts/47 S+  15:49 0:00 grep --color=auto chaihuajun</span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th>列名</th>\n<th>解释</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>USER</td>\n<td>进程的拥有者用户名</td>\n</tr>\n<tr>\n<td>PID</td>\n<td>进程的 ID</td>\n</tr>\n<tr>\n<td>%CPU</td>\n<td>该进程使用 CPU 资源的百分比</td>\n</tr>\n<tr>\n<td>%MEM</td>\n<td>该进程使用内存资源的百分比</td>\n</tr>\n<tr>\n<td>VSZ</td>\n<td>进程使用的虚拟内存大小</td>\n</tr>\n<tr>\n<td>RSS</td>\n<td>进程使用的实际内存大小</td>\n</tr>\n<tr>\n<td>TTY</td>\n<td>进程所绑定的终端</td>\n</tr>\n<tr>\n<td>STAT</td>\n<td>进程的状态</td>\n</tr>\n<tr>\n<td>START</td>\n<td>进程的启动时间</td>\n</tr>\n<tr>\n<td>TIME</td>\n<td>该进程占用 CPU 时间的累计值</td>\n</tr>\n<tr>\n<td>COMMAND</td>\n<td>进程所对应的命令</td>\n</tr>\n</tbody>\n</table>\n<p>其中， <code>-u</code>  参数指定了只显示与当前用户相关的进程，而  <code>x</code>  参数指定了显示所有进程，包括没有控制终端的进程。</p>\n</li>\n</ul>\n</li>\n<li>\n<p>查看内存</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   </span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>更改文件夹权限及用户</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -R 递归 修改文件所有者</span></span><br><span class=\"line\">chown [-R] username dirname/filename</span><br><span class=\"line\"><span class=\"comment\"># 修改文件所在群组</span></span><br><span class=\"line\">chgrp [-R] groupname dirname/filename</span><br><span class=\"line\"><span class=\"comment\"># 查看用户组</span></span><br><span class=\"line\">cat /etc/group</span><br><span class=\"line\"><span class=\"comment\"># 创建群组</span></span><br><span class=\"line\">groupadd groupName</span><br><span class=\"line\"><span class=\"comment\"># 将用户添加到指定组 -a append -G 将一个用户添加到多个群组</span></span><br><span class=\"line\">usermod -a -G groupA user</span><br><span class=\"line\"><span class=\"comment\"># 修改访问权限</span></span><br><span class=\"line\"><span class=\"comment\"># ll 查看文件属性</span></span><br></pre></td></tr></table></figure>\n<p>drwxrw-r–</p>\n<ul>\n<li>d 属性</li>\n<li>rwx 所有者权限</li>\n<li>rw- 群组用户权限</li>\n<li>r-- 其他用户权限</li>\n</ul>\n<p><code>chmod</code>  用数字修改文件访问权限，绝对权限</p>\n<table>\n<thead>\n<tr>\n<th>权限</th>\n<th>数字</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>r</td>\n<td>4</td>\n</tr>\n<tr>\n<td>w</td>\n<td>2</td>\n</tr>\n<tr>\n<td>x</td>\n<td>1</td>\n</tr>\n</tbody>\n</table>\n<p><code>chmod</code>  用字母分配权限，相对权限</p>\n<table>\n<thead>\n<tr>\n<th>字母</th>\n<th>含义</th>\n<th>符号</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>u</td>\n<td>所有者</td>\n<td>+</td>\n<td>添加权限</td>\n</tr>\n<tr>\n<td>g</td>\n<td>群组用户</td>\n<td>-</td>\n<td>移除权限</td>\n</tr>\n<tr>\n<td>o</td>\n<td>其他用户</td>\n<td>=</td>\n<td>分配权限</td>\n</tr>\n<tr>\n<td>a</td>\n<td>所有用户</td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<p><code>chmod g+rx file</code>   给群组用户添加可读、可执行权限</p>\n</li>\n<li>\n<p>ssh 配置公私钥</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLjUxY3RvLmNvbS9seHcxODQ0OTEyNTE0LzI5NDA3Mjc=\">参考链接：公私钥配置</span></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 生成公私钥对 -t 密钥类型 -c 注释文字</span></span><br><span class=\"line\">ssh-keygen -t rsa -C <span class=\"string\">&#x27;chaihj15@163.com&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># .ssh下找到id_rsa.pub 上传到服务器</span></span><br><span class=\"line\"><span class=\"comment\"># 追加到服务器ssh认证文件中</span></span><br><span class=\"line\">cat /xxx/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 如果没有authorized_keys，创建&amp;赋予600权限</span></span><br><span class=\"line\">touch authorized_keys</span><br><span class=\"line\">chmod 600 authorized_keys</span><br></pre></td></tr></table></figure>\n<p>本机创建～/.ssh/config</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Host            alias            #自定义别名</span><br><span class=\"line\">HostName        114.11.11.110         #替换为你的ssh服务器ip或domain</span><br><span class=\"line\">Port            22             #ssh服务器端口，默认为22</span><br><span class=\"line\">User            root             #ssh服务器用户名</span><br><span class=\"line\">IdentityFile    ~&#x2F;.ssh&#x2F;id_rsa    #第一个步骤生成的公钥文件对应的私钥文件</span><br></pre></td></tr></table></figure>\n<p>更改权限</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod 600 config</span><br></pre></td></tr></table></figure>\n<p>运行，愉快登录</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh alias</span><br></pre></td></tr></table></figure>\n<p>有些服务器默认不支持密钥登陆，需要修改 <code>/etc/ssh/sshd_config</code>  配置</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">去掉<span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#PubkeyAuthentication yes</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>发现本机 ip</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl ifconfig.me</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n",
            "tags": [
                "linux",
                "shell"
            ]
        },
        {
            "id": "https://snowroll.github.io/shell-except/",
            "url": "https://snowroll.github.io/shell-except/",
            "title": "shell-except",
            "date_published": "2020-10-21T14:57:55.000Z",
            "content_html": "<h3 id=\"内容摘要\"><a class=\"markdownIt-Anchor\" href=\"#内容摘要\">#</a> 内容摘要</h3>\n<ul>\n<li>except 简介</li>\n<li>利用 except，向服务器传输文件 &amp; ssh 登录服务器</li>\n</ul>\n<a id=\"more\"></a>\n<h4 id=\"1-except简介\"><a class=\"markdownIt-Anchor\" href=\"#1-except简介\">#</a> 1. except 简介</h4>\n<ul>\n<li>\n<p>except 的安装</p>\n<p>Mac:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install expect</span><br></pre></td></tr></table></figure>\n<p>Linux:</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt install expect</span><br></pre></td></tr></table></figure>\n<p>压缩包安装</p>\n<p>参考博客： <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC85NDJiODAxNzU3ZGU=\">https://www.jianshu.com/p/942b801757de</span></p>\n</li>\n<li>\n<p>简介</p>\n<p>shell 脚本功能非常强大，可以帮助我们自动完成很多繁琐的工作。但是对于登录服务器这种需要自动交互的过程，shell 就有些力不从心，except 可以完美解决这一需求。</p>\n<p>参考博客： Linux expect 用法 <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vMHhjYWZlZGFkZHkvcC83MTQ3MDUxLmh0bWw=\">https://www.cnblogs.com/0xcafedaddy/p/7147051.html</span></p>\n<p>expect 脚本使用 <span class=\"exturl\" data-url=\"aHR0cDovL2VpbnZlcm5lLmdpdGh1Yi5pby9wb3N0LzIwMTkvMDEvZXhwZWN0LWNvbW1hbmQuaHRtbCMlRTUlODUlQjMlRTklOTQlQUUlRTUlOTElQkQlRTQlQkIlQTQ=\">http://einverne.github.io/post/2019/01/expect-command.html# 关键命令</span></p>\n<p>expect - 自动交互脚本 <span class=\"exturl\" data-url=\"aHR0cDovL3hzdGFyY2QuZ2l0aHViLmlvL3dpa2kvc2hlbGwvZXhwZWN0Lmh0bWw=\">http://xstarcd.github.io/wiki/shell/expect.html</span></p>\n<ul>\n<li>\n<p>四个重要的命令</p>\n<table>\n<thead>\n<tr>\n<th>命令</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>spawn</td>\n<td>启动新的进程，输出可以被 expect 所捕获</td>\n</tr>\n<tr>\n<td>expect</td>\n<td>从进程接收字符串，期望获得字符串</td>\n</tr>\n<tr>\n<td>send</td>\n<td>向进程发送字符串，模拟用户输入，注意添加 <code>\\r</code>  回车</td>\n</tr>\n<tr>\n<td>interact</td>\n<td>允许用户与进程交互</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>简单示例  <code>demo.sh</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/usr/bin/except</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">set</span> timeout 10;  <span class=\"comment\"># 设置程序超时时间</span></span><br><span class=\"line\">spawn ssh root@10.10.10.11  <span class=\"comment\"># ssh连接服务器</span></span><br><span class=\"line\">expect <span class=\"string\">&quot;password&quot;</span>  <span class=\"comment\"># 判断进程输出中是否有&quot;password&quot;</span></span><br><span class=\"line\">send <span class=\"string\">&quot;your_password\\r&quot;</span>  <span class=\"comment\"># 将密码输入 \\r是回车 </span></span><br><span class=\"line\">interact  <span class=\"comment\"># 保持与服务器端的连接</span></span><br></pre></td></tr></table></figure>\n<p>运行方法:  <code>except demo.sh</code></p>\n<p>\\r \\n 的区别： <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC8yMzgwNGIwYjAzYzg=\">https://www.jianshu.com/p/23804b0b03c8</span></p>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"2-向服务器传输文件ssh登录服务器自动化脚本\"><a class=\"markdownIt-Anchor\" href=\"#2-向服务器传输文件ssh登录服务器自动化脚本\">#</a> 2. 向服务器传输文件 &amp; ssh 登录服务器自动化脚本</h4>\n<ul>\n<li>\n<p>except 与 shell 脚本结合</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"meta\">#!/usr/bin/expect</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 自动上传文件到服务器</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">auto_scp</span></span>()&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\"># -c: 执行脚本前先执行的命令</span></span><br><span class=\"line\">    expect -c <span class=\"string\">&quot;set timeout -1; </span></span><br><span class=\"line\"><span class=\"string\">            spawn scp yourfile root@10.10.10.10:/target_dir/</span></span><br><span class=\"line\"><span class=\"string\">            expect &#123;</span></span><br><span class=\"line\"><span class=\"string\">                \\&quot;yes/no\\&quot; &#123; send \\&quot;yes\\n\\&quot;; exp_continue&#125;</span></span><br><span class=\"line\"><span class=\"string\">                \\&quot;password\\&quot; &#123; send \\&quot;yourpasswd\\n\\&quot; &#125;  # \\n 和 \\r 均可以</span></span><br><span class=\"line\"><span class=\"string\">            &#125;</span></span><br><span class=\"line\"><span class=\"string\">            interact</span></span><br><span class=\"line\"><span class=\"string\">            &quot;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ssh登录服务器</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">auto_ssh_restart</span></span>() &#123;</span><br><span class=\"line\">    expect -c <span class=\"string\">&quot;set timeout -1;</span></span><br><span class=\"line\"><span class=\"string\">            spawn ssh root@10.10.10.10</span></span><br><span class=\"line\"><span class=\"string\">            expect \\&quot;password\\&quot; </span></span><br><span class=\"line\"><span class=\"string\">            send \\&quot;yourpassword\\r\\&quot;</span></span><br><span class=\"line\"><span class=\"string\">            expect \\&quot;]#\\&quot; &#123; send \\&quot;pwd\\n\\&quot; &#125; </span></span><br><span class=\"line\"><span class=\"string\">            interact&quot;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">auto_scp</span><br><span class=\"line\">auto_ssh_restart</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<center>点绛唇·途中逢管倅\n<center> 憔悴天涯，故人相遇情如故。别离何遽，忍唱阳关句！</center>\n<center>我是行人，更送行人去。愁无据。寒蝉鸣处，回首斜阳暮。</center>\n",
            "tags": [
                "linux",
                "shell",
                "except"
            ]
        }
    ]
}